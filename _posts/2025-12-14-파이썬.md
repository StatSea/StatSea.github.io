---
layout: single
title: "[p] 파이썬 정리" 
categories: [P]
tags : [P ,Statistics]
---

# 1. TIDYVERSE1

- filter : 조건을 설정해서 그 조건에 맞는 행들을 추출하는 것
- arrange : 큰 수부터 정렬하는 것
- desc : 변수를 내림차순 (큰값 -> 작은 값)으로 정렬하는 것
- head : 앞 6개의 행들만 보는 것
- glimpse : 데이터프레임의 행, 열, 각 변수 이름, 자료형, 앞부분 값을 요약해서 보여줌
- groupby : 조합을 그룹화 하여 묶음
- summarise : 요약통계량을 보여줌
- select : 변수를 지정해서 보여주는 것 (-는 제외 변수를 지정)
- mutate : 기존 데이터를 유지한 채 새로운 변수를 추가하는 것
- ungroup : groupby로 설정된 그룹 구조를 푸는 것, groupby로 얻었던 값들이 전부 풀어져서 보임
- distinct : 중복된 행들을 지움
- bind_rows : 여러 프레임을 행 밑으로 붙임
- slice(1:20) : 1부터 20까지의 행들을 선택해서 출력
- slice_max : 특정 변수의 값이 큰 행을 기준으로 상위 n개의 값을 출력
  - 그룹화를 하면 그 그룹들에서 가장 큰 값을 가진 행들을 보여줌 
- slice_sample(prop = 0.01) : 전체 샘플에서 1%를 추출하는 함수
- slice_head : 위에서부터 n개의 행을 추출하는 함수
- across : 여러 변수에 동일한 연산을 한번에 처리
 - <img width="318" height="69" alt="image" src="https://github.com/user-attachments/assets/d1e90303-93f0-4f61-ba54-0851295ac631" />
  - 3개의 변수에 각각 3개의 연산을 하는 전부 하는 것
- unique : 중복 제거된 고유값
- ux[which.max(tabulate(match(x, ux)))] : 최대 빈도값 얻어내기
  - match : x의 각 원소가 ux의 몇번째 위치인지 반환
  - tabulate : 각 숫자가 몇 번 나왔는지 셈
  - which.max : 가장 큰 빈도의 위치 반환

- case_when : 각 행에 대해 조건에 맞는 것을 찾아 그에 대응하는 값을 할당함
  - <img width="466" height="157" alt="image" src="https://github.com/user-attachments/assets/ceba0089-26fa-4b99-b70d-73ad6d8a1d78" />
  - name에서 mr,master 등등은 남자로 하고 ms,miss등등은 여자로 하고 여기에 해당하지 않는건 na로 만듦

- transmute : 새로운 변수를 생성하지만 기존 변수는 모두 제거 ( mutate는 남겨놨었음 )
- rename : 속성의 이름을 바꾸는 것
- pivot_wider : 긴 형태의 데이터를 넓은 형태로 변환하는 함수
  - names_from : 새 변수
  - values_from : 새 값
  - id_cols : 기존 변수

- pivot_long : 넓은형태의 데이터를 긴 형태로 반환하는 함수
  - names_to : 변수
  - values_to : 값 

- cbind : 행 개수만 맞으면 열을 옆으로 붙임
- bind_cols : 행개수 자료형 이름을 안전하게 관리하면서 옆으로 붙임
- rbind : 행 합치기 ( 밑으로 )
- bind_rows : 행 합치기 (밑으로)

- left_join : 왼쪽 조인 (왼쪽 속성 기준)
- inner_join : 내부 조인 (겹치는 속성 기준)
- full_join : 전체 외부 조인 (전부 합침)
- is.na : na가 있는지 확인
- na.omit : na가 있는 행을 제거
- na.rm : 결측값을 제거하고 연산하라
- imputation : 이건 함수는 아닌데 na인 곳에 적당한 값으로 채워 넣는 것
  - <img width="572" height="170" alt="image" src="https://github.com/user-attachments/assets/67fd6b99-6903-44ba-b172-6c4a4a857af6" />

---

## 2. TIDYVERSE 2

- geom point = 점그래프
- geom line = 선 그래프
  - '+'로 이어주면 동시에 그릴 수 있음
- theme_set(theme_bw()) : 격자무늬만 설정
- aes(x = date, y = temp) : x축은 date, y축은 temp로 둠
- theme(axis.title.x = element_text(color = "sienna", size = 15) : x의 타이틀의 이름의 색과 사이즈를 바꿈
- axis.title = element_text : 이렇게 한다면 축에 대해 일괄적으로 설정

<img width="777" height="224" alt="image" src="https://github.com/user-attachments/assets/a7a9d519-981b-4d39-9a28-5500a9be98ec" />

- expand.grid : 함수에 들어갈 조합을 전부 만들어주는 것
- coord_polar(theta = "x") : x축을 각도로 하여 원형 그래프 생성
- facet_wrap(~v) : v값마다 서브플롯 생성
- scale_x_continuous : x축을 스케일링 하는 것
- geom_rect : hsv 조합마다 작은 사각형을 그림

- expression(paste()) : 수식을 이용하여 제목을 붙이는 방법
- vjust : 세로로 얼마나 움직일지 지정
- hjust : 가로로 얼마나 움직일지 지정
- angle : 회전을 어느정도 할 것인지 지정
- axis.ticks.y = element_blank() : 세로축의 눈금을 공란으로 두는 방법
- labs(x = NULL, y = "") : 축의 제목을 널과 공란으로 한다면 제목이 아예 나오지 않는다.
  - 만약 세로축의 눈금값이 너무 작다면 경고가 나온다.

- expand_limits(x = 0, y = 0) : 각 눈금의 출발점을 0,0으로 하는 것
- coord_cartesian(expand = FALSE, clip = "off") : 축 끝부분에 여유부분을 두지 않고, 패널 부분을 넘어가는 부분은 자르는 옵션
- coord_fixed(ratio=1) : 가로와 세로가 1단위가 되도록 바꿔주는 것
- scale_y_continuous(label = function(x) {return(paste(x, "Degrees Fahrenheit"))}) : 눈금값마다 화시 온도를 집어넣음

- ggtitle : 그림의 제목을 설정
- caption : 오른쪽 밑에 캡션을 달음
- tag : 왼쪽 위에 태그를 달음
- margin = margin(10, 0, 10, 0) : 상우하좌 여백을 설정하는 것
- face = "bold.italic" : 서체를 지정해줌
- plot.caption = element_text(hjust = 0) : 캡션의 위치를 그래프 왼쪽 밑으로 바꿈
- plot.caption.position = "plot" : 캡션을 전체의 왼편으로 설정
- lineheight : 줄 높이 설정

<img width="79" height="102" alt="image" src="https://github.com/user-attachments/assets/2d1b6801-f124-4f5d-bda6-67a61b296078" />

- color = season : 범례를 색으로 구분 (오른쪽에 네모로 뜸)
- theme(legend.position = "none") : 범례를 아예 설정하지 않는 것 (오른쪽에 네모로 안뜸)
- shape = season : 범례를 모양으로 구분
- theme(legend.title = element_blank()) : 범례의 제목을 미출력
- theme(legend.position = "top") : 범례의 위치를 맨 위로 설정
- theme(legend.position = c(.15, .15), legend.background = element_rect(fill = "transparent")) : 범례 위치를 그림 안으로, 범례가 차지하는 공간의 배경 설정
- guides(color = guide_legend(direction = "horizontal")) : 범례의 항목을 가로로 나열
- scale_color_discrete(name = "Seasons\nindicated\nby colors:") : 범례의 제목을 설정
- factor(chic$season, levels = c("Winter", "Spring", "Summer", "Autumn")) : 범례 키 순서를 변경
- 
